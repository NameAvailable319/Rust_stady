
文件系统：操作系统使用文件控制块（FCB）实现文件目录

FCB主要包含信息：基本信息（文件名）、存取控制信息（文件的存取权限）、使用信息（文件建立时间）

文件的实现

读取文件

这是读取文件的系统调用
函数首先对参数有效性进行判断
之后对文件的类型进行判断
如果是目录文件或者是常规文件就执行读取操作
根据i节点和文件结构，读取文件中数据。
首先判断参数的有效性
之后循环的调用bread来读取数据
之后复制chars字节到用户缓冲区buf中
最后是修改该i节点的访问时间为当前时间和返回读取的字节数

文件写入

根据i节点和文件结构信息，将用户数据写入文件中
首先确定数据写入文件的位置
然后算出对应的盘块
然后用户缓冲区buf中复制c个字节到告诉缓冲块中p指向的开始位置处
最后是修改该i节点的访问时间为当前时间和返回读取的字节数


文件目录的实现

打开创建文件

首先对参数进行处理，然后搜索进程结构中文件结构指针数组一个空闲的文件句柄
接着为打开文件在文件表中寻找一个空闲结构项
然后调用函数open_namei()执行打开操作，若返回值小于0，则说明出错，就释放刚申请到的文件结构
然后为不同的文件类型做一些特殊的处理
最后初始化打开文件的文件结构，然后返回文件句柄

解析目录

先根据当前路径的第一个字符来判断当前路径是绝对路径还是相对路径
然后进循环处理过程，分割每个目录名
得到这个目录名后，调用查找目录项函数find_entry()在当前处理的目录中寻找指定名称的目录
如果找到这个目录，就设置一些信息，然后继续以该目录项为当前目录继续循环处理路径名中的下一目录名部分（或文件名）

注意：ExFAT 是不支持软链的